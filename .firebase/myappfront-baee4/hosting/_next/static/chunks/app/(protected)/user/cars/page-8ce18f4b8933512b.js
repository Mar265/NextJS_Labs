(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[392],{3149:(e,r,a)=>{Promise.resolve().then(a.bind(a,5610))},5610:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var t=a(5155),o=a(5624),s=a(4565),d=a(7058),l=a(1746),i=a(2115),n=a(6046);let c=()=>{let{user:e,loading:r}=(0,o.A)(),[a,c]=(0,i.useState)(null),[u,m]=(0,i.useState)([]),[p,y]=(0,i.useState)(""),[h,x]=(0,i.useState)(""),[f,b]=(0,i.useState)(""),[g,w]=(0,i.useState)(""),[v,k]=(0,i.useState)(""),[j,N]=(0,i.useState)(""),S=(0,n.useRouter)();(0,i.useEffect)(()=>{let e=(0,s.xI)().currentUser;if(e){if(!e.emailVerified){console.log("Użytkownik niezweryfikowany, przekierowanie do /user/verify"),S.push("/user/verify");return}c(e)}else console.log("Użytkownik niezalogowany, przekierowanie do /user/login"),S.push("/user/login")},[e,S]),(0,i.useEffect)(()=>{(async()=>{if(a)try{let e=(0,d.P)((0,d.rJ)(l.db,"cars"),(0,d._M)("userId","==",a.uid)),r=(await (0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));m(r)}catch(e){console.error("Błąd podczas pobierania samochod\xf3w:",e)}})()},[a]);let z=async e=>{e.preventDefault();let r=new Date().getFullYear();if(isNaN(g)||g<1899||g>r){k("Rok produkcji musi być liczbą pomiędzy 1899 a ".concat(r,".")),N("");return}try{await (0,d.gS)((0,d.rJ)(l.db,"cars"),{userId:a.uid,carMake:p,model:h,colour:f,yearOfManufacture:g}),N("Samoch\xf3d został dodany!"),k(""),y(""),x(""),b(""),w("");let e=(0,d.P)((0,d.rJ)(l.db,"cars"),(0,d._M)("userId","==",a.uid)),r=(await (0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));m(r)}catch(e){console.error("Błąd podczas dodawania samochodu:",e),k("Nie udało się dodać samochodu."),N("")}};return r?(0,t.jsx)("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-var(--primary-dark) to-var(--primary)",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Ładowanie danych..."})}):(0,t.jsx)("div",{className:"flex flex-col items-center min-h-screen bg-gradient-to-br from-var(--primary-dark) to-var(--primary)",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-var(--text-main) text-center mb-6",children:"Twoje samochody"}),v&&(0,t.jsx)("div",{className:"mb-4 bg-red-100 text-red-700 px-4 py-2 rounded-md",children:v}),j&&(0,t.jsx)("div",{className:"mb-4 bg-green-100 text-green-700 px-4 py-2 rounded-md",children:j}),(0,t.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"carMake",className:"block text-sm font-medium text-var(--text-dark)",children:"Marka"}),(0,t.jsx)("input",{type:"text",id:"carMake",value:p,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 mt-1 rounded-md border border-gray-300 focus:ring-2 focus:ring-var(--primary-dark)",placeholder:"Wprowadź markę samochodu"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"model",className:"block text-sm font-medium text-var(--text-dark)",children:"Model"}),(0,t.jsx)("input",{type:"text",id:"model",value:h,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 mt-1 rounded-md border border-gray-300 focus:ring-2 focus:ring-var(--primary-dark)",placeholder:"Wprowadź model samochodu"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"colour",className:"block text-sm font-medium text-var(--text-dark)",children:"Kolor"}),(0,t.jsx)("input",{type:"text",id:"colour",value:f,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 mt-1 rounded-md border border-gray-300 focus:ring-2 focus:ring-var(--primary-dark)",placeholder:"Wprowadź kolor"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"yearOfManufacture",className:"block text-sm font-medium text-var(--text-dark)",children:"Rok produkcji"}),(0,t.jsx)("input",{type:"number",id:"yearOfManufacture",value:g,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 mt-1 rounded-md border border-gray-300 focus:ring-2 focus:ring-var(--primary-dark)",placeholder:"Wprowadź rok produkcji"})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-var(--primary) text-white py-2 rounded-md hover:bg-var(--primary-dark)",children:"Dodaj samoch\xf3d"})]}),(0,t.jsx)("h2",{className:"text-xl font-bold mt-8",children:"Lista samochod\xf3w:"}),(0,t.jsx)("ul",{className:"mt-4",children:u.map(e=>(0,t.jsxs)("li",{className:"border-b border-gray-300 py-2 cursor-pointer hover:text-blue-600",onClick:()=>S.push("/user/cars/".concat(e.id)),children:[e.carMake," ",e.model," (",e.yearOfManufacture,")"]},e.id))})]})})}},5624:(e,r,a)=>{"use strict";a.d(r,{A:()=>c,AuthProvider:()=>n});var t=a(5155),o=a(2115),s=a(6046),d=a(4565),l=a(1746);let i=(0,o.createContext)(),n=e=>{let{children:r}=e,[a,n]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),m=(0,s.useRouter)();(0,o.useEffect)(()=>{let e=(0,d.hg)(l.j,e=>{e?n({uid:e.uid,email:e.email,displayName:e.displayName||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified}):n(null),u(!1)});return()=>e()},[]);let p=async()=>{try{await (0,d.CI)(l.j),n(null),console.log("Pomyślnie wylogowano."),m.push("/")}catch(e){console.error("Błąd podczas wylogowywania:",e)}},y=async()=>{try{l.j.currentUser&&!l.j.currentUser.emailVerified?(await (0,d.gA)(l.j.currentUser),console.log("E-mail weryfikacyjny został wysłany ponownie.")):console.log("E-mail już zweryfikowany.")}catch(e){console.error("Błąd podczas wysyłania e-maila weryfikacyjnego:",e)}};return(0,t.jsx)(i.Provider,{value:{user:a,loading:c,logout:p,resendVerificationEmail:y},children:r})},c=()=>(0,o.useContext)(i)},1746:(e,r,a)=>{"use strict";a.d(r,{db:()=>i,j:()=>l});var t=a(9904),o=a(4565),s=a(7058);let d=(0,t.Wp)({apiKey:"AIzaSyBdyYyVmrb1sNxMlIFnjG8U5wJsNYfc6QY",authDomain:"myappfront-baee4.firebaseapp.com",projectId:"myappfront-baee4",storageBucket:"myappfront-baee4.appspot.com",messagingSenderId:"393811731877",appId:"1:393811731877:web:9fe423b0b66309e9b7f44c",measurementId:"G-XWYY0W89KS"});window.firebaseLogLevel="silent";let l=(0,o.xI)(d),i=(0,s.aU)(d)},6046:(e,r,a)=>{"use strict";var t=a(6658);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})}},e=>{var r=r=>e(e.s=r);e.O(0,[992,782,861,441,517,358],()=>r(3149)),_N_E=e.O()}]);